#include <SPI.h>
#include <Wire.h>
#include <MultiLCD.h>

LCD_ILI9341 lcd; /* for 2.2" SPI TFT module */

const PROGMEM uint8_t tick[16 *16 / 8] =
{0x00,0x80,0xC0,0xE0,0xC0,0x80,0x00,0x80,0xC0,0xE0,0xF0,0xF8,0xFC,0x78,0x30,0x00,0x00,0x01,0x03,0x07,0x0F,0x1F,0x1F,0x1F,0x0F,0x07,0x03,0x01,0x00,0x00,0x00,0x00};

const PROGMEM uint8_t cross[16 *16 / 8] =
{0x00,0x0C,0x1C,0x3C,0x78,0xF0,0xE0,0xC0,0xE0,0xF0,0x78,0x3C,0x1C,0x0C,0x00,0x00,0x00,0x30,0x38,0x3C,0x1E,0x0F,0x07,0x03,0x07,0x0F,0x1E,0x3C,0x38,0x30,0x00,0x00};

void setup() {
  // set up LCD display
  lcd.begin();
  lcd.setFont(FONT_SIZE_MEDIUM);
  lcd.print("Analog input:");
  lcd.setCursor(160, 0);
  lcd.print("Button:");
  lcd.setFont(FONT_SIZE_XLARGE);
  // set up pin mode
  pinMode(A3, INPUT);
  pinMode(8, INPUT);
  // set up serial port baudrate
  Serial.begin(115200);
}

void loop() {
  // put your main code here, to run repeatedly:
  int value = analogRead(A3);
  lcd.setCursor(0, 3);
  lcd.printInt(value, 4);

  int btn = digitalRead(8);
  lcd.draw(btn ? tick : cross, 160, 24, 16, 16);
  if (!btn) digitalWrite(8, HIGH);
  
  // output analog value via serial UART
  Serial.println(value);
  
  delay(50);
}
